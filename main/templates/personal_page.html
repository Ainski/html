<!DOCTYPE html>
<html lang="en"><!--确保兼容 语言设置为英语-->

<head>
  <meta charset="UTF-8">                                                          <!-- head包含了文档的元数据meta-data-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">                           <!-- 此行是为了保证老式的IE浏览器可以以最佳方式显示网站，但是可以去掉，因为现在老式的IE已经out了-->

  <meta name="viewport" content="width=device-width, initial-scale=1.0">          <!--设置视口viewport，确保在移动设备上也能很好地展示-->
  <title>个人主页</title>                                                         <!--浏览器标签页显示该文档的标题-->
  <link rel="stylesheet" href="../static/css/basewxj.css">                                   <!--rel是必需的，表明当前文档和被链接文档的关系-->
  <!--href表明了链接样式表文件的路径；src表明了链接的JavaScript文件的路径-->
  <script src="/static/js/jq_pg.js"></script>
  <link rel="stylesheet" href="/static/css/index1wxj.css">


<link rel="stylesheet" href="/static/css/cursor.css" />
    <link rel="stylesheet" href="/static/css/cherry-blossom.css" />
  <style>
    /* Container for the blog items */
.blog-item {
  border: 1px solid #ddd;
  padding: 15px;
  margin-bottom: 20px;
  background-color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  border-radius: 5px;
}

/* Blog title */
.blog-title {
  font-size: 24px;
  font-weight: bold;
  margin-bottom: 10px;
}

.blog-title a {
  color: #333;
  text-decoration: none;
}

.blog-title a:hover {
  color: #007bff;
  text-decoration: underline;
}

/* Blog info (author and date) */
.blog-info {
  font-size: 14px;
  color: #777;
  margin-bottom: 10px;
}

.blog-author {
  margin-right: 10px;
}

.blog-date {
  font-style: italic;
}

/* Blog content */
.blog-content {
  font-size: 16px;
  line-height: 1.6;
  color: #444;
  white-space: pre-line;
}

/* Horizontal line */
.blog-line {
  border: 0;
  height: 1px;
  background: #ddd;
  margin: 20px 0;
}
  </style>
</head>


<body>
  <!--div定义文档中的分区division/section-->

  <!--canvas通过脚本JavaScript实时绘制图形，没有脚本就没效果-->
  <canvas class="canvas-wrap" id="triangle-lost-in-space" resize="true">

  </canvas>


  <!-- 遮罩层-遮住其他图层-->
  <div class="zhezhao" id="zhezhao">
    <!--span是行内,对行内的文本进行样式设计元素，div是块级元素-->
    <span class="close">
      <!--svg的描述-->
      <svg t="1649229755294" class="icon" viewBox="0 0 1024 1024" version="1.1"
        xmlns="http://www.w3.org/2000/svg" p-id="4692" width="32" height="32">
        <path
          d="M512 0C229.187368 0 0 229.187368 0 512 0 794.812632 229.187368 1024 512 1024 794.812632 1024 1024 794.812632 1024 512 1024 229.187368 794.812632 0 512 0ZM512 970.105263C259.368421 970.105263 53.894737 764.631579 53.894737 512 53.894737 259.368421 259.368421 53.894737 512 53.894737 764.631579 53.894737 970.105263 259.368421 970.105263 512 970.105263 764.631579 764.631579 970.105263 512 970.105263ZM550.130526 512 719.629474 342.366316C730.273684 331.856842 730.273684 314.88 719.629474 304.370526 709.12 293.726316 692.143158 293.726316 681.633684 304.370526L512 473.869474 342.366316 304.370526C331.856842 293.726316 314.88 293.726316 304.370526 304.370526 293.726316 314.88 293.726316 331.856842 304.370526 342.366316L473.869474 512 304.370526 681.633684C293.726316 692.143158 293.726316 709.12 304.370526 719.629474 309.625263 724.884211 316.496842 727.578947 323.368421 727.578947 330.24 727.578947 337.111579 724.884211 342.366316 719.629474L512 550.130526 681.633684 719.629474C686.888421 724.884211 693.76 727.578947 700.631579 727.578947 707.503158 727.578947 714.374737 724.884211 719.629474 719.629474 730.273684 709.12 730.273684 692.143158 719.629474 681.633684L550.130526 512Z"
          p-id="4693">
        </path>
      </svg>

   </span>

  </div>

   <!-- 主要页面 -->
   <div class="box">

      <!-- 顶部栏 -->
      <div class="header borderafter">
      <!-- 返回按钮/返回浏览的前一个页面-->
      <a style="position: absolute;left:50px;" href="javascript:history.back()">
        <svg t="1649246285004" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="3737" width="20" height="20">
          <path
            d="M98 468.9l322.8-322.8v184.4C743.6 376.7 881.9 607.3 928 837.8 812.7 676.4 651.3 602.6 420.8 602.6v189.1L98 468.9z"
            p-id="3738" fill="#254665"></path>
        </svg>
      </a>


      <div class="col">
        <span style="font-family:verdana;color:lightblue;font-size:20px;">TJBank</span>
        <!-- 右边操作栏 -->

        <div class="header-right">
          <!-- 按钮 -->
          <div class="min_menu-wrap" id="minmenu">
            <span class="min_menu"></span>
          </div>
          <!-- 列表 -->
          <div class="menu_list">
            <!-- 栏目 -->
            <ul class="header-nav">

            </ul>
          </div>
        </div>
      </div>
    </div>


    <!-- 顶部导航 -->
    <div class="navigation">
      <div class="nav-titleBox co zz">
        <!-- 占位符 -->
        <div class="co-left"></div>

        <!-- 标题 -->
        <div class="co-right ">
          <h1>
            Hi<br>
            Welcom to my homepage
          </h1>
        </div>
      </div>
    </div>




    <!-- 主要内容 -->
    <div class="container content zz">

      <!-- 占位符 -->
      <div class="co-left">
        <!-- 简历吸盘 -->
        <div class="me-card carbox borderbefore" id="mycard">
          <div class="mecar-title">
            <div class="me-image">
              <span class="status">
              </span>
              <!--想在这里通过后端得到用户的头像-->
              <img src="../static/images/toux.jpg" alt="">
            </div>
            <!--想在这里加后端传送的用户名字-->
            <h2 id="currentUsername"></h2>

          </div>
          <div class="borderbotm"></div>
        </div>
      </div>


      <!-- 右边 -->
      <div class="co-right" id="next-one">
        <!-- 我的故事 -->
        <div class="content-li li2">
          <h3>
            <span>发过的贴子</span>
            <div class="borderbotm"></div>
            <!--想通过后端获取到用户发的贴子数量，然后动态编号-->
            <span id="blogCount">01</span>
          </h3>
          <div class="carbox copybottm">
            <blockquote id="blogList">
             <!--想通过后端获取到用户发的贴子-->
              </blockquote>
          </div>
        </div>

        <div class="borderbotm"></div>
        <!-- 底部 -->
        <div class="carbox copybottm">
          ©2024      CSGroup
        </div>
      </div>
      <div class="left">
      </div>

    </div>
   </div>
</body>
<script>
let isLoggedIn = false;
let userEmail = '';
let username = '';
  function checkLogin() {
    fetch('/get_user_status')
            .then(response => response.json())
            .then(data => {
              if (data.is_login) {
                document.getElementById('currentUsername').innerHTML = data.username;


              }
            }
            )
            .catch(error => console.error(error));
  }
  function renderBlogList() {
    fetch('/get_user_topics',{
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
        },
      body: JSON.stringify({ email: userEmail })
      })

         .then(response => response.json())
        .then(data => {
              console.log(data);
              let blogList = document.getElementById('blogList');
              let blogCount = document.getElementById('blogCount');
              blogList.innerHTML = '';
              blogCount.innerHTML = data.topics.length.toString().padStart(2, '0');
              data.topics.forEach(item => {
                let blogItem = document.createElement('div');
                blogItem.innerHTML = `
                  <div class="blog-item">
                    <div class="blog-title">
                      <a href="/blog/${item.id}">${item[1]}</a>
                    </div>
                    <div class="blog-info">
                      <span class="blog-author">${username}</span>
                      <span class="blog-date">${new Date(item[4]).toLocaleString()}</span>
                    </div>
                    <div class="blog-content">
                      ${item[2]}
                    </div>
                  </div>
                  <hr class="blog-line">
                `;
                blogList.appendChild(blogItem);
              });
            }
            )
            .catch(error => console.error(error));
  }
  function init() {
    checkLogin();
    renderBlogList();

  }
  init();
</script>
<script type="text/javascript" src="/static/js/pg_style.js"></script>
<script type="text/javascript" src="/static/js/canvaswxj.js"></script>
<script src="/static/js/basewxj.js"></script>
<script src="/static/js/index1wxj.js"></script>
<script src="../static/js/cherry-blossom.js"></script>
    <script src="../static/js/cursor.js"></script>


</html>
